{% extends "layout.html" %}
{% block title %}
Change Password &#8226; @{{ current_user.username }} &#8226; CodingShoding - Learn coding with us
{% endblock %}
{% block body %}

<!-- main content -->
<main class="my-3">
    <div class="container-fluid px-0 px-md-3 px-lg-3 px-xl-5">
        {% with messages = get_flashed_messages(with_categories=True) %}{% if messages %}
        {% for category, message in messages %}
        {% if category=='success' %}
        <div class="d-flex justify-content-between alert alert-success alter-dismissible fade show mx-2 my-1"
            role="alert">
            <p class="m-0"><i class="bi bi-check2-circle me-2"></i>{{ message }}</p>
            <p type="button" class="m-0" data-bs-dismiss="alert" aria-label="Close">
                <i class="bi bi-x text-muted"></i>
            </p>
        </div>
        {% elif category=='info' %}
        <div class="d-flex justify-content-between alert alert-info alter-dismissible fade show mx-2 my-1" role="alert">
            <p class="m-0"><i class="bi bi-info-circle me-2"></i>{{ message }}</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                <i class="bi bi-x text-muted"></i>
            </button>
        </div>
        {% elif category=='warning' %}
        <div class="d-flex justify-content-between alert alert-warning alter-dismissible fade show mx-2 my-1"
            role="alert">
            <p class="m-0"><i class="bi bi-exclamation-triangle me-2"></i>{{ message }}</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                <i class="bi bi-x text-muted"></i>
            </button>
        </div>
        {% else %}
        <div class="d-flex justify-content-between alert alert-danger alter-dismissible fade show mx-2 my-1"
            role="alert">
            <p class="m-0"><i class="bi bi-x-circle me-2"></i>{{ message }}</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                <i class="bi bi-x text-muted"></i>
            </button>
        </div>{% endif %}{% endfor %}{% endif %}{% endwith %}
        <div class="row">
            <section class="col-xsm-12 col-sm-10 col-md-4 col-xl-3">
                <div class="card m-2">
                    <div class="card-body">
                        <ul class="list-style-none m-0 p-0">
                            <div class="dropdown-menu-hid">
                                <a href="{{ url_for('auth.settings') }}">
                                    <li class="dropdown-padding m-0 mb-1"><i class="bi bi-person-fill me-2"></i>Account
                                    </li>
                                </a>
                                <a href="{{ url_for('auth.change_password') }}">
                                    <li class="dropdown-padding active m-0 mb-1"><i
                                            class="bi bi-key-fill me-2"></i>Change
                                        Password</li>
                                </a>
                            </div>
                        </ul>
                    </div>
                </div>
            </section>
            <section class="col-xsm-12 col-sm-10 col-md-8 col-lg-6 col-xl-6">
                <div class="card m-2">
                    <div class="card-body">
                        <form method="post" action="{{ url_for('auth.change_password') }}" accept-charset="UTF-8">
                            {{ form.csrf_token() }}
                            <h3 class="mb-4">Change Your Password</h3>
                            <div class="form-outline mb-3">
                                {{ form.old_password.label(class_="form-label") }}
                                {{ form.old_password(class_="form-control form-control-lg",
                                placeholder="Enter old password") }}
                            </div>
                            <div class="form-outline mb-3">
                                {{ form.new_password.label(class_="form-label") }}
                                {{ form.new_password(class_="form-control form-control-lg",
                                placeholder="Enter new password") }}
                            </div>
                            <div class="form-outline mb-3">
                                {{ form.new_password_confirm.label(class_="form-label") }}
                                {{ form.new_password_confirm(class_="form-control form-control-lg",
                                placeholder="Confirm new password") }}
                            </div>
                            <div class="d-flex justify-content-start mb-3">
                                {{ form.check(class_="form-check-input my-auto me-2") }}
                                {{ form.check.label(class_="form-check-label") }}
                            </div>
                            <div class="d-flex justify-content-center">
                                {{ form.submit(class_="btn btn-primary") }}
                            </div>
                        </form>
                        <div class="d-flex justify-content-center mt-3">
                            <a href="{{ url_for('auth.forgot_password') }}">Forgot password?</a>
                        </div>
                    </div>
                    <hr class="m-0">
                    <div class="card-body">
                        <div class="d-flex justify-content-center">
                            <a href="{{ url_for('app.index') }}" type="button" role="button"
                                class="btn btn-outline-secondary">
                                Back to Home
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</main>

{% endblock %}